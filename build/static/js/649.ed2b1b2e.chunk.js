"use strict";(self.webpackChunkangolosport=self.webpackChunkangolosport||[]).push([[649],{8649:(e,s,a)=>{a.r(s),a.d(s,{default:()=>m});var r=a(5043),o=a(1591),i=a(7360),l=a(854),n=a.n(l),t=a(7503),d=a(3516),p=a(3033),c=(a(1580),a(579));const m=function(){const[e,s]=(0,r.useState)(!1),[a,l]=(0,r.useState)(!1),[m,u]=(0,r.useState)(!1),[g,h]=(0,r.useState)(!1),[w,x]=(0,r.useState)(!1),b=p.Ik({old_password:p.Yj().required("Old password is required"),new_password:p.Yj().required("New password is required").min(8,"New password must be 8 characters long").max(15,"New password must not exceed 15 characters long").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])/,"New password must contain one uppercase, one lowercase, one number and one special character"),confirm_password:p.Yj().required("Confirm password is required").oneOf([p.KR("new_password"),null],"New password and confirm password must match")}),v=p.Ik({email:p.Yj().required("Email is required").email("Email must be a valid email")}),j=(0,d.Wx)({initialValues:{email:JSON.parse(localStorage.getItem("angolosport_auth_back")).email},validationSchema:v,onSubmit:async e=>{l(!0);try{let s=JSON.parse(localStorage.getItem("angolosport_auth_back"));s.email=e.email,localStorage.setItem("angolosport_auth_back",JSON.stringify(s));let a=await n().post("admin/change-password",{only_email:!0,email:e.email});l(!1),(0,t.oR)(a.data.message,{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,type:"success"})}catch(s){s.response.data.error?(0,t.oR)(s.response.data.error.message,{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,type:"error"}):(0,t.oR)(s.response.data.message,{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,type:"error"}),l(!1)}}}),f=(0,d.Wx)({initialValues:{old_password:"",new_password:"",confirm_password:""},validationSchema:b,onSubmit:async(e,a)=>{let{resetForm:r}=a;s(!0);try{let a=await n().post("admin/change-password",e);r(),s(!1),(0,t.oR)(a.data.message,{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,type:"success"})}catch(o){o.response.data.error?(0,t.oR)(o.response.data.error.message,{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,type:"error"}):(0,t.oR)(o.response.data.message,{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,type:"error"}),s(!1)}}});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.m,{children:(0,c.jsx)("title",{children:"Update Profile"})}),(0,c.jsx)(i.A,{children:(0,c.jsx)("div",{className:"row",children:(0,c.jsx)("div",{className:"col-12",children:(0,c.jsxs)("div",{className:"card my-4",children:[(0,c.jsx)("div",{className:"card-header p-0 position-relative mt-n4 mx-3 z-index-2",children:(0,c.jsx)("div",{className:"bg-gradient-primary shadow-primary border-radius-lg pt-4 pb-3",children:(0,c.jsx)("h6",{className:"text-white text-capitalize ps-3",children:"Update Profile"})})}),(0,c.jsx)("div",{className:"card-body px-0 pb-2",children:(0,c.jsxs)("div",{className:"p-4",children:[(0,c.jsxs)("form",{onSubmit:j.handleSubmit,children:[(0,c.jsx)("div",{className:"input-group input-group-outline mb-3",children:(0,c.jsx)("input",{type:"text",id:"email",name:"email",className:"form-control",placeholder:"Email Address",readOnly:!0,value:j.values.email||"",onChange:j.handleChange})}),j.errors.email?(0,c.jsx)("div",{className:"text-danger",children:j.errors.email}):null]}),(0,c.jsx)("br",{}),(0,c.jsxs)("form",{onSubmit:f.handleSubmit,children:[(0,c.jsxs)("div",{className:"input-group input-group-outline mb-3 pas-eye",children:[(0,c.jsx)("input",{type:m?"text":"password",id:"old_password",name:"old_password",className:"form-control",placeholder:"Old Password",value:f.values.old_password||"",onChange:f.handleChange}),(0,c.jsx)("i",{className:m?"fas fa-eye":"fas fa-eye-slash",onClick:()=>{u(!m)}})]}),f.errors.old_password?(0,c.jsx)("div",{className:"text-danger",children:f.errors.old_password}):null,(0,c.jsxs)("div",{className:"input-group input-group-outline mb-3 pas-eye",children:[(0,c.jsx)("input",{type:g?"text":"password",id:"new_password",name:"new_password",className:"form-control",placeholder:"New Password",value:f.values.new_password||"",onChange:f.handleChange}),(0,c.jsx)("i",{className:g?"fas fa-eye":"fas fa-eye-slash",onClick:()=>{h(!g)}})]}),f.errors.new_password?(0,c.jsx)("div",{className:"text-danger",children:f.errors.new_password}):null,(0,c.jsxs)("div",{className:"input-group input-group-outline mb-3 pas-eye",children:[(0,c.jsx)("input",{type:w?"text":"password",id:"confirm_password",name:"confirm_password",className:"form-control",placeholder:"Confirm Password",value:f.values.confirm_password||"",onChange:f.handleChange}),(0,c.jsx)("i",{className:w?"fas fa-eye":"fas fa-eye-slash",onClick:()=>{x(!w)}})]}),f.errors.confirm_password?(0,c.jsx)("div",{className:"text-danger",children:f.errors.confirm_password}):null,(0,c.jsx)("div",{className:"text-center",children:(0,c.jsx)("button",{type:"submit",className:"btn btn-lg bg-gradient-primary btn-lg w-20 mt-4 mb-0",disabled:e,children:e?(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),(0,c.jsx)("span",{className:"sr-only"})," Submitting"]}):"Submit"})})]})]})})]})})})})]})}},1580:()=>{}}]);
//# sourceMappingURL=649.ed2b1b2e.chunk.js.map